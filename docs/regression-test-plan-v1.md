# 川渝行迹 v1.0 回归测试方案

## 测试概述

**版本**: 1.0
**测试范围**: 全功能回归测试
**测试环境**: 生产环境准备就绪
**预期执行时间**: 60-90 分钟

---

## 一、用户认证模块

### 1.1 注册功能
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 正常注册 | 输入邮箱、密码(6位+)、确认密码 | 注册成功，跳转 Dashboard |
| 密码太短 | 输入5位密码 | 提示"密码至少需要6个字符" |
| 密码不一致 | 两次输入不同密码 | 提示"两次输入的密码不一致" |
| 邀请注册 | 通过 `?invite=XXX` 进入注册 | 注册后自动加入行程 |
| 中文输入 | 输入中文昵称 | 正常显示 |
| 注册后头像 | 注册后查看个人中心 | 显示默认头像(首字母) |

### 1.2 登录功能
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 正常登录 | 输入正确邮箱密码 | 登录成功，跳转 Dashboard |
| 错误密码 | 输入错误密码 | 提示错误信息 |
| 邀请登录 | 通过 `?invite=XXX` 进入登录 | 登录后自动跳转加入行程 |
| 记住我 | 勾选"记住我" | 下次访问保持登录状态 |

### 1.3 登出功能
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 正常登出 | 点击退出按钮 | 登出成功，跳转登录页 |

---

## 二、个人中心模块

### 2.1 个人资料
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 查看资料 | 点击头像进入个人中心 | 显示昵称、邮箱、统计信息 |
| 编辑昵称 | 点击"编辑昵称"，输入新昵称 | 保存成功，昵称更新 |
| 昵称过长 | 输入超过20字符昵称 | 输入受限 |
| 取消编辑 | 编辑后点击取消 | 恢复原值 |

### 2.2 头像上传
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 上传头像 | 点击相机图标，选择图片 | 上传成功，头像更新 |
| 上传大图 | 选择2MB以上图片 | 提示"图片大小不能超过2MB" |
| 上传非图片 | 选择PDF文件 | 提示"请选择图片文件" |
| 头像压缩 | 上传高清大图 | 自动压缩为200x200 |
| Dashboard显示 | 上传后返回Dashboard | 显示新头像 |

### 2.3 统计信息
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 行程统计 | 查看统计卡片 | 显示正确的参与/创建行程数 |
| 日志统计 | 查看统计卡片 | 显示正确的日志数 |
| 照片统计 | 查看统计卡片 | 显示正确的照片数 |

---

## 三、行程管理模块

### 3.1 创建行程
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 正常创建 | 填写名称、日期范围 | 创建成功，跳转行程详情 |
| 日期验证 | 结束日期早于开始日期 | 提示日期错误 |
| 空名称 | 不填写行程名称 | 表单验证失败 |
| 自动生成分享码 | 创建后查看成员页 | 显示6位分享码 |
| 封面图片 | 创建后上传封面 | 显示在行程卡片 |

### 3.2 行程列表
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 查看行程 | Dashboard 查看行程列表 | 显示所有参与的行程 |
| 点击行程 | 点击行程卡片 | 跳转行程详情 |
| 空状态 | 新用户无行程 | 显示"还没有行程"提示 |

### 3.3 行程详情
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 查看详情 | 进入行程详情页 | 显示名称、日期、成员数、天数 |
| 日程概览 | 查看日期网格 | 显示所有日期 |
| 点击日期 | 点击某日期 | 跳转日历页对应日期 |
| 快捷入口 | 查看四个功能入口 | 正常跳转 |

---

## 四、活动管理模块

### 4.1 日历视图
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 日期选择 | 切换顶部日期 | 显示当天活动 |
| 空日期 | 选择无活动日期 | 显示"暂无活动" |
| 移动端视图 | 手机访问 | 显示滚动日期选择器 |

### 4.2 创建活动
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 基础创建 | 选择日期、标题 | 创建成功 |
| 选择预置地点 | 点击地点建议 | 自动填充地点信息 |
| 设置时间 | 选择开始/结束时间 | 保存时间 |
| 添加描述 | 输入活动描述 | 保存描述 |
| 上移活动 | 点击上移按钮 | 活动顺序上移 |
| 下移活动 | 点击下移按钮 | 活动顺序下移 |
| 顶部活动上移 | 第一个活动点击上移 | 无变化 |

### 4.3 编辑活动
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 修改信息 | 编辑活动信息 | 保存成功，信息更新 |
| 删除活动 | 点击删除 | 活动被删除 |

---

## 五、旅行记录模块

### 5.1 日志列表
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 查看日志 | 选择有日志的日期 | 显示日志内容 |
| 空日志 | 选择无日志日期 | 显示"添加旅行记录"按钮 |
| 他人私密日志 | 查看他人私密日志 | 显示"这是其他成员的私密记录" |
| 公开日志 | 查看公开日志 | 正常显示内容 |
| 私密标记 | 查看私密日志 | 显示紫色锁图标 |

### 5.2 编辑日志
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 创建日志 | 输入内容，点击保存 | 保存成功 |
| 中文输入 | 使用中文IME输入 | 正常输入中文 |
| 富文本加粗 | 选中文字点击B | 文字加粗 |
| 富文本列表 | 点击列表按钮 | 插入列表 |
| 富文本链接 | 插入链接 | 链接可点击 |
| 切换私密 | 点击私密开关 | 状态切换，图标更新 |
| 自动保存 | 编辑后离开 | 内容保留 |

---

## 六、照片库模块

### 6.1 照片浏览
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 日期筛选 | 切换顶部日期 | 显示对应日期照片 |
| 照片计数 | 日期卡片显示数量 | 显示正确照片数 |
| 空状态 | 无照片日期 | 显示"还没有照片" |
| 缩略图 | 查看照片网格 | 显示缩略图 |
| 图片说明 | 照片有caption | 底部显示说明 |

### 6.2 照片上传
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 单张上传 | 选择1张照片 | 上传成功 |
| 多张上传 | 选择多张照片 | 全部上传成功 |
| 拖拽上传 | 拖拽照片到区域 | 上传成功 |
| 大文件 | 选择5MB以上图片 | 提示"单张最大5MB" |
| 日期选择 | 不选择日期上传 | 提示必填 |
| 图片压缩 | 上传高清图 | 自动压缩 |
| 上传进度 | 观察上传过程 | 显示进度动画 |
| 上传后跳转 | 全部上传成功 | 自动跳转回照片库 |

---

## 七、成员管理模块

### 7.1 分享邀请
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 打开分享弹窗 | 点击分享按钮 | 显示分享对话框 |
| 复制邀请 | 点击复制按钮 | 复制成功，显示"已复制" |
| 邀请话术 | 查看复制内容 | 显示"【创建者名】邀请你..." |
| 二维码展示 | 查看弹窗 | 显示邀请二维码 |

### 7.2 加入行程
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 已登录加入 | 已登录用户点击邀请链接 | 自动加入，跳转行程 |
| 未登录加入 | 未登录用户点击邀请链接 | 跳转登录(带invite参数) |
| 未登录注册 | 通过邀请链接注册 | 注册后自动加入 |
| 重复加入 | 已是成员点击邀请链接 | 直接跳转行程 |
| 无效邀请 | 访问无效邀请码 | 显示"邀请无效" |
| 新成员角色 | 被邀请用户加入 | 默认角色为viewer |

### 7.3 成员列表
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 查看成员 | 进入成员页 | 显示所有成员 |
| 角色显示 | 查看成员列表 | 显示创建者/编辑者/查看者标签 |
| 自己标记 | 查看自己的条目 | 显示"(你)"标记 |
| 头像显示 | 成员有头像 | 显示头像图片 |
| 默认头像 | 成员无头像 | 显示首字母圆圈 |

### 7.4 移除成员
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 创建者移除 | 创建者点击删除按钮 | 成员被移除 |
| 非创建者 | 非创建者查看列表 | 无删除按钮 |
| 移除自己 | 不能移除自己 | 无删除按钮 |
| 移除创建者 | 创建者条目 | 无删除按钮 |
| 移除确认 | 点击删除 | 弹出确认对话框 |

---

## 八、移动端体验

### 8.1 响应式布局
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| 移动端首页 | 手机访问首页 | 布局正常 |
| 移动端登录 | 手机访问登录页 | 布局正常 |
| 触摸按钮 | 点击按钮 | 按钮足够大(≥44x44) |
| 底部导航 | Dashboard底部 | 显示三个Tab |
| 底部导航状态 | 切换页面 | 高亮当前页 |

### 8.2 移动端导航
| 测试项 | 操作步骤 | 预期结果 |
|--------|----------|----------|
| Dashboard导航 | 点击行程/创建/我的 | 正确跳转 |
| 行程详情导航 | 点击日历/记录/照片 | 正确跳转 |
| 个人中心导航 | 点击行程/创建/我的 | 正确跳转 |

---

## 九、性能测试

### 9.1 加载性能
| 测试项 | 预期指标 |
|--------|----------|
| 首页加载 | < 2秒 |
| 登录跳转 | < 1秒 |
| 行程列表 | < 1秒 |
| 照片库 | < 2秒 |

### 9.2 图片处理
| 测试项 | 预期指标 |
|--------|----------|
| 头像压缩 | 200x200, < 50KB |
| 照片压缩 | 宽度≤2000px, 质量0.8 |

---

## 十、兼容性测试

### 10.1 浏览器
| 浏览器 | 版本 | 状态 |
|--------|------|------|
| Chrome | 最新 | ✓ |
| Safari | 最新 | ✓ |
| Firefox | 最新 | ✓ |
| Edge | 最新 | ✓ |

### 10.2 设备
| 设备类型 | 状态 |
|----------|------|
| iPhone | ✓ |
| Android | ✓ |
| iPad/平板 | ✓ |
| 桌面 | ✓ |

---

## 缺陷报告模板

```
缺陷ID: BUG-001
发现时间: YYYY-MM-DD HH:MM
发现人: [姓名]
严重程度: [严重/中等/轻微]
环境: [浏览器/设备]

标题: [简短描述]

复现步骤:
1.
2.
3.

预期结果:
实际结果:

截图/附件:
```

---

## 测试通过标准

- 所有 P0 严重缺陷已修复
- P1 缺陷修复率 ≥ 95%
- 核心流程无阻塞性问题
- 性能指标达标
- 移动端体验正常

---

## 附录：测试账号

```
测试账号1: test1@example.com / Test123456
测试账号2: test2@example.com / Test123456
创建者账号: creator@example.com / Test123456
```
